<?xml version="1.0" encoding="utf-8"?>
<xml>
	<pragma once="true" />
	<set name="hxflac_folder" value="${haxelib:hxflac}/include" />
	<include name="${HXCPP}/build-tool/BuildCommon.xml" />

	<files id="hxflac">
		<compilerflag value="-I${hxflac_folder}/" />
		<compilerflag value="-I${hxflac_folder}/flac_decoder" />
		<compilerflag value="-I${hxflac_folder}/flac/include" />
		<compilerflag value="-I${hxflac_folder}/flac/src/libFLAC/include" />

		<compilerflag value="-DFLAC__HAS_OGG=0" />
		<compilerflag value="-DFLAC__NO_DLL" if="windows" />
		<compilerflag value="-DFLAC_API_EXPORTS" if="windows" />
		<compilerflag value="-DHAVE_CONFIG_H=1" />
		
		<compilerflag value="-D_WIN32" if="windows" />
		<compilerflag value="-D_CRT_SECURE_NO_WARNINGS" if="windows" />
		<compilerflag value="-D_CRT_SECURE_NO_WARNINGS" if="windows" />
		<compilerflag value="-D_CRT_NONSTDC_NO_DEPRECATE" if="windows" />
		<compilerflag value="-DNO_PRECOMPILED_HEADERS" if="windows" />

		<file name="${hxflac_folder}/flac/src/share/win_utf8_io/win_utf8_io.c" if="windows"/>

		<file name="${hxflac_folder}/hxflac.cpp" />
		<file name="${hxflac_folder}/flac_decoder/flac_decoder.c" />
		<file name="${hxflac_folder}/flac_decoder/stubs.c" />
	</files>

	<files id="libflac">
		<compilerflag value="-I${hxflac_folder}/" />
		<compilerflag value="-I${hxflac_folder}/flac/include" />
		<compilerflag value="-I${hxflac_folder}/flac/src/libFLAC/include" />

		<compilerflag value="-DFLAC__HAS_OGG=0" />
		<compilerflag value="-DFLAC__NO_DLL" if="windows" />
		<compilerflag value="-DFLAC_API_EXPORTS" if="windows" />
		<compilerflag value="-DHAVE_CONFIG_H=1" />
		
		<compilerflag value="-D_WIN32" if="windows" />
		<compilerflag value="-D_CRT_SECURE_NO_WARNINGS" if="windows" />
		<compilerflag value="-D_CRT_NONSTDC_NO_DEPRECATE" if="windows" />
		<compilerflag value="-DNO_PRECOMPILED_HEADERS" if="windows" />

		<file name="${hxflac_folder}/flac/src/libFLAC/bitmath.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/bitreader.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/bitwriter.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/cpu.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/crc.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/fixed.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/float.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/format.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/lpc.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/md5.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/memory.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/stream_decoder.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/stream_encoder.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/window.c" />

		<file name="${hxflac_folder}/flac/src/libFLAC/metadata_iterators.c" />
		<file name="${hxflac_folder}/flac/src/libFLAC/metadata_object.c" />
	</files>

	<files id="haxe">
		<compilerflag value="-I${hxflac_folder}/" />
		<compilerflag value="-I${hxflac_folder}/flac/include" />
		<compilerflag value="-I${hxflac_folder}/flac/src/libFLAC/include" />

		<compilerflag value="-D_CRT_SECURE_NO_WARNINGS" if="windows" />
	</files>

	<files id="__main__">
		<compilerflag value="-I${hxflac_folder}/" />
		<compilerflag value="-I${hxflac_folder}/flac/include" />
		<compilerflag value="-I${hxflac_folder}/flac/src/libFLAC/include" />

		<compilerflag value="-D_CRT_SECURE_NO_WARNINGS" if="windows" />
	</files>

	<target id="haxe">
		<files id="hxflac" />
		<files id="libflac" />
	</target>

	<set name="SLIBEXT" value=".lib" if="windows" />
	<set name="SLIBEXT" value=".a" unless="windows" />
	<set name="SLIBEXT" value=".so" if="webos" />
</xml>